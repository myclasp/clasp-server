<div class="group">

  <h1>
  <%= @group.name %> / <%= pluralize @group.memberships.count, "member" %>
  </h1>

  <nav>
    <ul class="nav navbar-nav" style=""> 
      <li><%= link_to 'Map', '#' %></li>
      <li><%= link_to 'Hour', '#' %></li>
      <li><%= link_to 'Week', '#' %></li>
      <li><%= link_to 'Month', '#' %></li>
      <li><%= link_to 'Last 7 days', '#' %></li>
    </ul>
  </nav>

  <div class="clear" id='map'></div>

</div>

<%= content_for :script do %>
  var map = L.map('map');
  map.setView([54.04354, -2.78502], 15);

  L.tileLayer('http://a.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
    maxZoom: 18, subdomains: '', }).addTo(map);

  var normalIcon = L.icon({
    iconUrl: '<%= asset_path('marker-icon.png') %>',
    iconSize: [25, 41],
    iconAnchor: [12, 41],
    popupAnchor: [1, -27],
    shadowUrl: '<%= asset_path('marker-shadow.png') %>',
    shadowSize: [41, 41],
    shadowAnchor: [13, 41]
  });

  var markers = L.markerClusterGroup();  
  var str = '';
  var marker;

  <% for marker in @markers %>
    marker = L.marker(<%= marker[:latlng] %>, {icon: normalIcon});
    marker.bindPopup('<%= marker[:popup] %>'); 
    markers.addLayer(marker); 
  <% end %>
  
  map.addLayer(markers);

  /*var popup = L.popup();
  var x = 4;
  function onMapClick(e) {
    x++;
    popup.setLatLng(e.latlng).setContent("hello").openOn(map);
  }
  map.on('click', onMapClick);*/


<% end %>